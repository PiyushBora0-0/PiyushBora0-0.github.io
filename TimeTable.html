<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Colorful Timetable App - Daily Timetables</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #eef2f3;
      margin: 0;
      padding: 0;
    }
    header {
      background: linear-gradient(135deg, #70e1f5, #ffd194);
      padding: 20px;
      text-align: center;
      color: #333;
    }
    nav {
      display: flex;
      justify-content: center;
      background: #f39c12;
      padding: 10px;
    }
    nav button {
      margin: 0 10px;
      padding: 10px 20px;
      border: none;
      background: #3498db;
      color: #fff;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }
    nav button:hover {
      background: #2980b9;
    }
    .container {
      max-width: 1000px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h2, h3 {
      color: #333;
    }
    label {
      font-weight: bold;
      margin-right: 5px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 12px;
      text-align: center;
    }
    input[type="text"], select {
      width: 90%;
      padding: 8px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button, input[type="button"] {
      padding: 10px 15px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 5px;
      background: #27ae60;
      color: #fff;
      margin-top: 10px;
    }
    button:hover, input[type="button"]:hover {
      background: #1e8449;
    }
    .hidden {
      display: none;
    }
    .tabs {
      margin-top: 20px;
      display: flex;
      justify-content: center;
    }
    .tabs button {
      margin: 0 5px;
      background: #e74c3c;
      border: none;
      padding: 10px 15px;
      color: #fff;
      cursor: pointer;
      border-radius: 5px;
    }
    .tabs button.active {
      background: #c0392b;
    }
    /* Highlight table if viewing current day */
    .highlight {
      border: 2px solid #e74c3c;
    }
    .select-group {
      margin: 10px 0;
    }
  </style>
</head>
<body>
<H1> Temporary Time Table </H1>
<header>
  <h1>Colorful Timetable App</h1>
</header>

<nav>
  <button id="adminBtn">Admin Page</button>
  <button id="teacherBtn">Teacher Login</button>
</nav>

<div class="container">
  <!-- Admin Section -->
  <div id="adminSection" class="hidden">
    <h2>Admin Timetable Editor</h2>
    <div class="select-group">
      <label for="adminClassSelect">Select Class:</label>
      <select id="adminClassSelect">
        <!-- Options 1-12 generated by JS -->
      </select>
    </div>
    <div class="select-group">
      <label for="adminDaySelect">Select Day:</label>
      <select id="adminDaySelect">
        <option value="Monday">Monday</option>
        <option value="Tuesday">Tuesday</option>
        <option value="Wednesday">Wednesday</option>
        <option value="Thursday">Thursday</option>
        <option value="Friday">Friday</option>
      </select>
    </div>
    <h3 id="adminClassHeading">Class 1 Timetable - Monday</h3>
    <table id="adminTimetable">
      <thead>
        <tr>
          <th>Period</th>
          <th>Time</th>
          <th>Subject</th>
          <th>Teacher</th>
        </tr>
      </thead>
      <tbody>
        <!-- Timetable rows injected by JS -->
      </tbody>
    </table>
    <button id="saveBtn">Save Changes</button>
  </div>

  <!-- Teacher Section -->
  <div id="teacherSection" class="hidden">
    <h2>Teacher Portal</h2>
    <div id="teacherLoginForm">
      <label for="teacherName">Enter your name:</label>
      <input type="text" id="teacherName" placeholder="e.g., Mr. Smith">
      <button id="teacherLoginBtn">Login</button>
    </div>
    <div id="teacherDashboard" class="hidden">
      <h3>Welcome, <span id="loggedTeacher"></span></h3>
      <div class="tabs">
        <button id="selectClassTab" class="active">Select Class Timetable</button>
        <button id="myClassesTab">My Classes</button>
      </div>
      <!-- Tab Content -->
      <div id="selectClassContent">
        <div class="select-group">
          <label for="teacherClassSelect">Select Class:</label>
          <select id="teacherClassSelect">
            <!-- Options 1-12 generated by JS -->
          </select>
        </div>
        <div class="select-group">
          <label for="teacherDaySelect">Select Day:</label>
          <select id="teacherDaySelect">
            <option value="Monday">Monday</option>
            <option value="Tuesday">Tuesday</option>
            <option value="Wednesday">Wednesday</option>
            <option value="Thursday">Thursday</option>
            <option value="Friday">Friday</option>
          </select>
        </div>
        <table id="classTimetable">
          <thead>
            <tr>
              <th>Period</th>
              <th>Time</th>
              <th>Subject</th>
              <th>Teacher</th>
            </tr>
          </thead>
          <tbody>
            <!-- Timetable rows injected by JS -->
          </tbody>
        </table>
      </div>
      <div id="myClassesContent" class="hidden">
        <div class="select-group">
          <label for="teacherMyDaySelect">Select Day:</label>
          <select id="teacherMyDaySelect">
            <option value="Monday">Monday</option>
            <option value="Tuesday">Tuesday</option>
            <option value="Wednesday">Wednesday</option>
            <option value="Thursday">Thursday</option>
            <option value="Friday">Friday</option>
          </select>
        </div>
        <table id="myClassesTable">
          <thead>
            <tr>
              <th>Class</th>
              <th>Period</th>
              <th>Time</th>
              <th>Subject</th>
            </tr>
          </thead>
          <tbody>
            <!-- Filtered rows injected by JS -->
          </tbody>
        </table>
      </div>
      <button id="teacherLogoutBtn">Logout</button>
    </div>
  </div>
</div>

<script>
  // Days and period times.
  const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"];
  const periodTimes = [
    "9:00 - 9:40",
    "9:40 - 10:20",
    "10:20 - 11:00",
    "11:00 - 11:40",
    "11:40 - 12:10", // Lunch
    "12:10 - 12:50",
    "12:50 - 1:30",
    "1:30 - 2:10",
    "2:10 - 2:50"
  ];
  const subjects = ["Mathematics", "English", "Science", "History", "Geography", "Art", "Music", "PE"];
  const teacherNames = ["Mr. Smith", "Ms. Johnson", "Mrs. Brown", "Mr. Garcia", "Ms. Davis", "Mr. Wilson", "Mrs. Martinez", "Mr. Anderson"];

  // Determine current day (if weekend, default to Monday)
  let d = new Date().getDay();
  let currentDay;
  if(d < 1 || d > 5) {
    currentDay = "Monday";
  } else {
    const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
    currentDay = dayNames[d];
  }

  // Populate class options (1-12) for admin and teacher dropdowns.
  const adminClassSelect = document.getElementById("adminClassSelect");
  const teacherClassSelect = document.getElementById("teacherClassSelect");
  for(let i = 1; i <= 12; i++){
    const optA = document.createElement("option");
    optA.value = i;
    optA.textContent = "Class " + i;
    adminClassSelect.appendChild(optA);
    
    const optT = document.createElement("option");
    optT.value = i;
    optT.textContent = "Class " + i;
    teacherClassSelect.appendChild(optT);
  }

  // Set default day for admin and teacher day selects.
  document.getElementById("adminDaySelect").value = currentDay;
  document.getElementById("teacherDaySelect").value = currentDay;
  document.getElementById("teacherMyDaySelect").value = currentDay;

  // Generate timetable data for each class (1-12) for each day.
  const timetableData = {};
  for(let cls = 1; cls <= 12; cls++){
    timetableData[cls] = {};
    days.forEach(day => {
      timetableData[cls][day] = [];
      periodTimes.forEach((time, i) => {
        if(i === 4) { // Lunch break row.
          timetableData[cls][day].push({
            period: "Lunch",
            time: time,
            subject: "",
            teacher: ""
          });
        } else {
          timetableData[cls][day].push({
            period: i < 4 ? i + 1 : i,  // Period numbers: 1-4, then 5-8.
            time: time,
            subject: subjects[Math.floor(Math.random() * subjects.length)],
            teacher: teacherNames[Math.floor(Math.random() * teacherNames.length)]
          });
        }
      });
    });
  }

  // --- Admin Section Functions ---
  const adminDaySelect = document.getElementById("adminDaySelect");
  const adminHeading = document.getElementById("adminClassHeading");

  function renderAdminTimetable(classNumber, day) {
    const tbody = document.querySelector("#adminTimetable tbody");
    tbody.innerHTML = "";
    const data = timetableData[classNumber][day];
    data.forEach((entry, index) => {
      const tr = document.createElement("tr");

      // Period column.
      const tdPeriod = document.createElement("td");
      tdPeriod.textContent = entry.period;
      tr.appendChild(tdPeriod);

      // Time column.
      const tdTime = document.createElement("td");
      tdTime.textContent = entry.time;
      tr.appendChild(tdTime);

      // Subject column.
      const tdSubject = document.createElement("td");
      if(entry.period === "Lunch") {
        tdSubject.textContent = "Lunch Break";
      } else {
        const inputSub = document.createElement("input");
        inputSub.type = "text";
        inputSub.value = entry.subject;
        inputSub.onchange = (e) => {
          timetableData[classNumber][day][index].subject = e.target.value;
        };
        tdSubject.appendChild(inputSub);
      }
      tr.appendChild(tdSubject);

      // Teacher column.
      const tdTeacher = document.createElement("td");
      if(entry.period === "Lunch") {
        tdTeacher.textContent = "";
      } else {
        const inputTeach = document.createElement("input");
        inputTeach.type = "text";
        inputTeach.value = entry.teacher;
        inputTeach.onchange = (e) => {
          timetableData[classNumber][day][index].teacher = e.target.value;
        };
        tdTeacher.appendChild(inputTeach);
      }
      tr.appendChild(tdTeacher);

      tbody.appendChild(tr);
    });
  }

  // Update admin view when class or day selection changes.
  adminClassSelect.addEventListener("change", () => {
    const cls = adminClassSelect.value;
    const day = adminDaySelect.value;
    adminHeading.textContent = "Class " + cls + " Timetable - " + day;
    renderAdminTimetable(cls, day);
  });

  adminDaySelect.addEventListener("change", () => {
    const cls = adminClassSelect.value;
    const day = adminDaySelect.value;
    adminHeading.textContent = "Class " + cls + " Timetable - " + day;
    renderAdminTimetable(cls, day);
  });

  // Initial admin render.
  renderAdminTimetable(adminClassSelect.value, adminDaySelect.value);

  // --- Teacher Section Functions ---
  const teacherLoginForm = document.getElementById("teacherLoginForm");
  const teacherDashboard = document.getElementById("teacherDashboard");
  const loggedTeacherSpan = document.getElementById("loggedTeacher");

  document.getElementById("teacherLoginBtn").addEventListener("click", () => {
    const teacherName = document.getElementById("teacherName").value.trim();
    if(teacherName === ""){
      alert("Please enter your name.");
      return;
    }
    loggedTeacherSpan.textContent = teacherName;
    teacherLoginForm.classList.add("hidden");
    teacherDashboard.classList.remove("hidden");
    showSelectClassTab();
  });

  document.getElementById("teacherLogoutBtn").addEventListener("click", () => {
    document.getElementById("teacherName").value = "";
    teacherDashboard.classList.add("hidden");
    teacherLoginForm.classList.remove("hidden");
  });

  // Tabs for teacher dashboard.
  const selectClassTab = document.getElementById("selectClassTab");
  const myClassesTab = document.getElementById("myClassesTab");
  const selectClassContent = document.getElementById("selectClassContent");
  const myClassesContent = document.getElementById("myClassesContent");

  selectClassTab.addEventListener("click", showSelectClassTab);
  myClassesTab.addEventListener("click", showMyClassesTab);

  function showSelectClassTab(){
    selectClassTab.classList.add("active");
    myClassesTab.classList.remove("active");
    selectClassContent.classList.remove("hidden");
    myClassesContent.classList.add("hidden");
    renderTeacherClassTimetable(teacherClassSelect.value, document.getElementById("teacherDaySelect").value);
  }

  function showMyClassesTab(){
    myClassesTab.classList.add("active");
    selectClassTab.classList.remove("active");
    myClassesContent.classList.remove("hidden");
    selectClassContent.classList.add("hidden");
    renderMyClassesTable();
  }

  // Render full timetable for a selected class and day (teacher view).
  function renderTeacherClassTimetable(classNumber, day) {
    const tbody = document.querySelector("#classTimetable tbody");
    tbody.innerHTML = "";
    const data = timetableData[classNumber][day];
    data.forEach((entry) => {
      const tr = document.createElement("tr");

      const tdPeriod = document.createElement("td");
      tdPeriod.textContent = entry.period;
      tr.appendChild(tdPeriod);

      const tdTime = document.createElement("td");
      tdTime.textContent = entry.time;
      tr.appendChild(tdTime);

      const tdSubject = document.createElement("td");
      tdSubject.textContent = entry.period === "Lunch" ? "Lunch Break" : entry.subject;
      tr.appendChild(tdSubject);

      const tdTeacher = document.createElement("td");
      tdTeacher.textContent = entry.teacher;
      tr.appendChild(tdTeacher);

      tbody.appendChild(tr);
    });
    // Highlight table if viewing current day.
    const table = document.getElementById("classTimetable");
    if(day === currentDay){
      table.classList.add("highlight");
    } else {
      table.classList.remove("highlight");
    }
  }

  document.getElementById("teacherDaySelect").addEventListener("change", () => {
    renderTeacherClassTimetable(teacherClassSelect.value, document.getElementById("teacherDaySelect").value);
  });

  teacherClassSelect.addEventListener("change", () => {
    renderTeacherClassTimetable(teacherClassSelect.value, document.getElementById("teacherDaySelect").value);
  });

  // Render "My Classes" view: list all periods (across classes 1–12) for the logged-in teacher on a selected day.
  function renderMyClassesTable(){
    const selectedDay = document.getElementById("teacherMyDaySelect").value;
    const teacherName = loggedTeacherSpan.textContent.toLowerCase();
    const tbody = document.querySelector("#myClassesTable tbody");
    tbody.innerHTML = "";
    let filteredRows = [];
    for(let cls = 1; cls <= 12; cls++){
      const data = timetableData[cls][selectedDay];
      data.forEach((entry) => {
        // Exclude lunch rows and only include matching teacher.
        if(entry.period !== "Lunch" && entry.teacher.toLowerCase() === teacherName){
          filteredRows.push({class: cls, entry: entry});
        }
      });
    }
    // Sort by period number.
    filteredRows.sort((a, b) => a.entry.period - b.entry.period);
    filteredRows.forEach(row => {
      const tr = document.createElement("tr");

      const tdClass = document.createElement("td");
      tdClass.textContent = "Class " + row.class;
      tr.appendChild(tdClass);

      const tdPeriod = document.createElement("td");
      tdPeriod.textContent = row.entry.period;
      tr.appendChild(tdPeriod);

      const tdTime = document.createElement("td");
      tdTime.textContent = row.entry.time;
      tr.appendChild(tdTime);

      const tdSubject = document.createElement("td");
      tdSubject.textContent = row.entry.subject;
      tr.appendChild(tdSubject);

      tbody.appendChild(tr);
    });
    const table = document.getElementById("myClassesTable");
    if(selectedDay === currentDay){
      table.classList.add("highlight");
    } else {
      table.classList.remove("highlight");
    }
  }

  document.getElementById("teacherMyDaySelect").addEventListener("change", renderMyClassesTable);

  // Navigation between Admin and Teacher sections.
  document.getElementById("adminBtn").addEventListener("click", () => {
    document.getElementById("adminSection").classList.remove("hidden");
    document.getElementById("teacherSection").classList.add("hidden");
  });

  document.getElementById("teacherBtn").addEventListener("click", () => {
    document.getElementById("teacherSection").classList.remove("hidden");
    document.getElementById("adminSection").classList.add("hidden");
  });

  // "Save Changes" button (data is stored only in memory).
  document.getElementById("saveBtn").addEventListener("click", () => {
    alert("Changes saved (data is not persisted in this demo).");
    console.log("Updated Timetable Data:", timetableData);
  });
</script>

</body>
</html>
